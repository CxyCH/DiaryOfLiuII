# SLAM综述性论文阅读手记  

----
#### `S00P01` Simultaneous Localization And Mapping: Present, Future, and the Robust-Perception Age  
- **==0 摘要==**  
- 本文以批判的眼光看待已有的研究成果，描述了新的挑战和问题，这些挑战和问题仍然值得人们以谨慎的科学态度持续研究。  
- 讨论了机器人需要SLAM吗？SLAM有什么作用？  
- **==1 简介==**  
- 古典年代（1986-2004）：这一时期，引入了SLAM概率论推导方法，包括基于扩展卡尔曼滤波、粒子滤波和最大似然估计。第一个挑战是效率和数据关联（求解位姿）的鲁棒性问题。  
- 算法分析年代（2004-2015）：有许多SLAM基本特性的研究，包括可观测性，收敛性和一致性。研究者们理解了稀疏特征在高效SLAM解决方案中的重要角色，开发了主要开源SLAM库。  
- **以下为主要的综述文献：**  
- 1. 【2006】 《Simultaneous localization and mapping: part I》和《Simultaneous localization and mapping (SLAM): Part II》两篇文献，重点讨论了概率方法和数据关联。  
- 2. 【2008】 《The slam problem: A survey》，主要讨论了滤波器方法。  
- 3. 【2008】 《Guest editorial special issue on visual slam》，主要讨论了视觉SLAM方法。  
- 4. 【2011】 《A tutorial on graph-based slam》，主要讨论了SLAM后端优化。  
- 5. 【2011】 《A review of recent developments in simultaneous localization and mapping》，主要讨论了观测、一致性和收敛性。  
- 6. 【2012】 《Visual odometry Part I: the first 30 years and fundamentals》和《Visual odometry Part II: Matching, robustness, optimization, and applications》，主要讨论了视觉里程计。  
- 7. 【2016】 《Multiplerobot simultaneous localization and mapping: A review》，主要讨论了多机器人SLAM。  
- 8. 【2016】 《Visual place recognition: A survey》，主要讨论视觉位置识别。  
- **为什么全自动机器人需要SLAM？**SLAM是要构建一个全局一致性的环境表示方法，同时利用自动运动测量和回路闭合。这里的关键词是“回路闭合”：如果我们去掉回路闭合，SLAM就会退化成里程计。但是里程计算法的偏移已经非常小了（小于整个轨迹长度的0.5%），因此这个问题是有意义的。答案分为三个方面：  
- 1. 过去10年中，视觉惯性传感器里程计的算法发展代表了最新进展，视觉惯性导航可以看做是一个退化的SLAM系统，其中回环闭合模块功能关闭。相对于航空领域等领域的惯性导航，SLAM要求研究更具有挑战性的配置下（比如，没有GPS，低性能传感器）的传感器融合。  
- 2. 回环闭合的优势很清楚：通过查找回环闭合，机器人可以理解环境的真正拓扑关系，可以找到位置间的最短路径，因此SLAM可以得到环境的拓扑关系。  
- 3. SLAM是必须的，很多应用都内在或外在地需要一个全局一致性的地图。例如，在许多军事与民生工程应用中机器人的目标是探索环境生成地图，或者检查结构状况（建筑物，桥梁等），在这些例子中需要一个全局一致性3D重构。  
- **SLAM有什么作用？**SLAM是一个比较宽泛的话题，可以从以下几个方面来评估一个SLAM问题的成熟度：  
- 1. 机器人：运动类型（比如，运动状况，最大速度），可用的传感器（如，分辨率，采用率），可用的计算资源；  
- 2. 环境：平面或三维的，自然路标或人工路标，动态元素的数量，对称的数量和感知混淆的风险。这些方面都依赖于传感器与环境的匹配；比如，两个房间对2D激光扫描仪来说看起来可能一样（感知混淆），但相机可以从外观线索上分辨它们；  
- 3. 性能要求：机器人状态估计中的期望精度，环境表示的精度和类型（比如，基于路标的或稠密云点），成功的概率（满足精度边界的测试结果的百分比），估计延时，最大运行时间，最大地图面积。  
- **比较成熟的情况：**  
- 1. 构建一个2D室内环境，机器人配备了编码器和激光扫描仪，有足够的精度（<10厘米）和足够的鲁棒性（比如，低失效率），很大程度上可以解决问题。  
- 2. 或者一个运行缓慢的机器人采用基于视觉的SLAM（比如，火车探路车，室内机器人），视觉惯性里程计被认为是成熟的研究领域。  
- **存在挑战的情况**：  
- 1. 目前当机器人的运动或环境太过挑战时，SLAM算法很容易失效（比如，机器人快速的运动，高动态环境）  
- 2. SLAM算法通常无法满足严苛的性能要求（比如，对快速回环闭合的快速估计）  
- **关于SLAM未来要考虑的问题。**SLAM正在进入第三个时代，鲁棒性觉醒的时代，它具有以下特征：  
- 1. 鲁棒性能：这一时期SLAM系统在任意环境总运行的失效率较低；系统具有失效保护机制且具有自动调整的功能可以根据应用场景自动选择系统参数；  
- 2. 高层次的理解力：SLAM系统已经除了基本的几何重建还能够在更高层次上理解环境信息（比如，语义，可供性，高层几何意义，物理意义）；  
- 3. 资源敏感：SLAM系统可以进行裁剪以满足现有传感器和计算资源，也可以根据现有资源调整计算负载；  
- 4. 对任务驱动的判断：SLAM系统可以自适应地表示地图，其复杂度可以根据机器人执行的任务而改变。  
- **==2 现代SLAM系统解析==**  
- 从概念上现代SLAM系统可以被分为两个部分：前端与后端。**前端**负责将传感器的数据转化为用于状态估计的数据模型。**后端**根据前端生成的数据模型进行推断。  
- **采用最大后验（MAP）估计的SLAM后端**，（公式推导在SLAM#1笔记本）  
- 1. 经过推导，最大后验估计会转化成非线性最小二乘优化问题（这是在假设噪声遵从高斯分布的条件下做出的推导），如果假设噪声遵从拉普拉斯分布就需要将最小二乘的优化目标函数改变为L-1范数。  
- 2. 从优化模型上看，SLAM和BA的目标函数很近似，但是SLAM与BA之间存在两个不同的地方：（1）BA只用投影几何模型，而SLAM则能够处理更多的传感器模型。（2）SLAM的优化函数被设计为**增量式**的。  
- 3. 通常使用高斯-牛顿方法或者Levenberg-Marquardt方法（LM方法）来进行求解。  
- 4. 求解过程中的雅克比矩阵是稀疏的因此可以进行快速求解。  
- 5. 基于最大后验估计的SLAM方法要比传统的基于非线性滤波的方法更为高效和精确。  
- **目前可用的SLAM求解库：**  
- 1. GTSAM, 2012, 《Factor graphs and GTSAM: A hands-on introduction》  
- 2. g2o, 2011, 《g2o: A general framework for graph opti- mization》  
- 3. Ceres, https://code.google.com/p/ceres-solver/  
- 4. iSAM, 2008, 《iSAM: Incremental Smoothing and Mapping》  
- 5. SLAM++, 2013, 《Incremental block cholesky factorization for nonlinear least squares in robotics》  
- **依赖于传感器的SLAM前端**  
- 1. 最大后验估计需要使用经过预处理的传感器数据，因此被称为后端，并依赖于传感器的SLAM前端。  
- 2. 在机器人的实际应用中，可能很难将传感器测量数据转化成分析函数，因此需要进行预处理。例如，原始传感器数据是图像，很难将每个像素的亮度表示为SLAM状态的函数，在一般性的表示中，可能很难给出一个分析方程将观测值与表示方法的参数进行关联。  
- 3. 前端的主要任务是：从传感器数据中提取相关特征。例如，在视觉SLAM中，前端提取环境中少量的特征云点的像素位置；这些云点的像素观测值就很容易在后端部分构建模型。  
- 4. 前端部分还负责将观测值和环境中特定的路标关联（比如，3D云点）：这就是所谓的数据关联。  
- 5. 前端还可以为非线性优化中的变量提供一个初始估计。  
- **==3 完全自动化：鲁棒性==**  
- SLAM系统会因为出现算法失效和硬件相关的失效而变得脆弱。例如，对于极端动态环境的处理，受到现有SLAM算法的局限而很难实现。另外也会由于传感器和机器老化，使系统变得脆弱。  
- 明确地提出**失效模式**对长期运行非常关键，那样就不会对环境结构有要求。例如，要求大部分是静态环境或者完全依赖板载传感器。  
- **SLAM系统失效的来源包括：**  
- 1. 数据关联：是把每次的测量值与对应的状态进行关联。在基于特征的视觉SLAM系统中，它将每个特征和特定的路标关联。可能会出现不同的传感器输入产生相同的传感器信息，导致这个问题非常难解决。如果数据关联构建了错误的测量-状态匹配，后端可能会出现错误估计。  
- 2. 如果环境中存在短期或季节变化，而且没有对动态环境构建模型，可能会产生错误的短期或长期的数据关联。通常SLAM系统要求机器人所处的环境是静态的，这个要求在小场景中单一地图构建中是适用的。
- 3. 如果地图构建长时间运行在大场景中，变化就不可避免。昼夜变化，季节变换，例如树叶或环境结构的改变、旧建筑物变成新建筑物，所有这些都会影响SLAM系统的性能。例如，依赖于视觉特征的系统会在剧烈的昼夜变化中失效，当旧建筑消失环境几何方法也会失效。  
- 4. 在恶劣的环境中使用SLAM，比如水下环境，由于水下属于可视光有限，且一直在变化，而且一般的传感器无法使用（比如镭射测距仪）。  
- **对错误数据的鲁棒性包含以下几个方向：**  
- 1. 传统方法中，前端用于构建正确的数据关联。短期数据关联是最容易处理的：如果传感器的数据采样率比机器人的运动快，对相同特征的跟踪就比较容易。而中长期数据关联需要回环检测来实现鲁棒性。
- 2. 对于回环检测通常使用词袋模型。词袋模型可以量化特征空间以进行更有效的搜索。词袋模型可以设计成层级式字典树，可以在大范围数据集中有效查找。基于词袋模型的技术在处理单任务闭环回路检测中表现出非常可靠的性能。
- 3. 但是词袋方法会由于剧烈的图像变化，而导致视觉单词无法匹配。因此需要开发新的方法，参见《Visual place recognition: A survey, 2016》。  
- 4. 尽管回环检测会使用几何验证（包括RANSAC算法）来确认回环闭合的质量，使得前端的回环检测更具有鲁棒性。但是在直视对齐的情况下，错误的回环闭合会被反馈到后端，并严重损害最大后验估计的质量。  
- **动态环境的挑战主要有两方面：**  
- 1. SLAM系统必须检测，丢掉，跟踪变化。主流的方法都尝试丢掉场景中的动态部分，也有些研究工作将动态元素作为模型的一部分。  
- 2. SLAM系统必须构建一个处理永久或半永久变化的模型，建立更新地图的机制。目前的SLAM系统处理动态环境，要么维护同一位置的多个（与时间相关）地图，要么只有一个表示但可以根据时间变动进行调整。  
- **研究方向：鲁棒性方面待解决的问题**  
- 1. **失效保护SLAM和恢复机制：**现有的SLAM方案在出现离群点时仍然比较脆弱。这主要因为鲁棒的SLAM是基于非凸集迭代优化。这样会有两个结果：（1）离群点去除的结果依赖于优化中初始估计的质量；（2）系统天生脆弱：任一一个离群点都会降低估计的质量，它又会反过来降低系统分辨离群点的能力。因此一个理想的SLAM系统应该是具有失效保护和失效侦测的功能，例如：系统必须能检测到即将发生的失效问题（比如：由于离群点或者硬件老化），还要具有恢复机制重建之前的操作任务，现有SLAM系统没有这种功能。  
- 2. **针对硬件的鲁棒性：**硬件失效并不是SLAM研究的问题，但这些失效会影响SLAM系统。如果传感器精度由于误操作或老化而降低，传感器的测量（噪声和偏移）质量不能匹配后端的噪声模型，将会导致较差的估计。这就会产生不同的研究问题：我们如何检测不良传感器的运行状态？如何相应地调整传感器噪声数据统计模型（协方差，偏移）？  
- 3. **几何度量重定位：**与基于特征方法不同，基于贴图的方法可以在白天和夜晚的图像序列上实现回环闭合，同样也可以对不同的季节实现回环闭合检测。对于几何度量重定位（比如对之前构建的地图估计相对位姿），基于特征的方法可能更规范化，但无法扩展到动态的环境中。（1）对于传感器选择和传感器位置匹配的相关的研究：轨迹匹配中相机的劣势；先用一个相机建图，再在同一个地图中定位另一个相机.（2）另外还要考虑从不对称的拍照角度上得到不同的照片中如何定位，相关的研究包括：在激光地图中的视觉定位问题；如何在Google街景照片的3D纹理地形图上定位无人机；用激光扫描仪实现手绘地图；在2D户型图上用RGB-D定位。
- 4. **时间变化和地图畸变：**主流SLAM方法都假设现实世界是固定不变的，然而真实世界则因为动态环境和物体畸变而并非一成不变。一个理想的SLAM方案应该能够处理环境中的动态因素，包括非固定部分，能够长时间工作生成所有地形地图，并能实时处理这些工作。最近关于非固定运动结构，比如论文《Sequential non-rigid structure from motion using physical priors, 2016》、《Real-time 3d reconstruction of non-rigid shapes with a single moving camera, 2016》、《Visual slam for handheld monocular endoscope, 2014》，限制比较少，但主要应用于小场景。在SLAM领域，《Dynamicfusion: Reconstruction and tracking of nonrigid
scenes in real-time, 2015》针对小场景提出了非刚体实例。然而，大场景非刚体地图仍然需要大量研究。  
- 5. **自动参数调整：**SLAM系统（特别是数据关联模块）需要很多的参数调整。要在给定的场景中正确地工作，特征匹配的阈值，RANSAC参数，还有决定何时添加新的因子到因子图中，或者何时触发回环闭合算法搜索匹配等参数都需要进行配置。如果SLAM需要跳出受限的环境在任意场景中都适用，那么就需要考虑自动参数调整的方法。  
 **==4 完全自动化：尺度==**  








