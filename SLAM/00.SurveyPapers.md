# SLAM综述性论文阅读手记  

----
#### `S00P01` Simultaneous Localization And Mapping: Present, Future, and the Robust-Perception Age  
- **==0 摘要==**  
- 本文以批判的眼光看待已有的研究成果，描述了新的挑战和问题，这些挑战和问题仍然值得人们以谨慎的科学态度持续研究。  
- 讨论了机器人需要SLAM吗？SLAM有什么作用？  
- **==1 简介==**  
- 古典年代（1986-2004）：这一时期，引入了SLAM概率论推导方法，包括基于扩展卡尔曼滤波、粒子滤波和最大似然估计。第一个挑战是效率和数据关联（求解位姿）的鲁棒性问题。  
- 算法分析年代（2004-2015）：有许多SLAM基本特性的研究，包括可观测性，收敛性和一致性。研究者们理解了稀疏特征在高效SLAM解决方案中的重要角色，开发了主要开源SLAM库。  
- **以下为主要的综述文献：**  
- 1. 【2006】 《Simultaneous localization and mapping: part I》和《Simultaneous localization and mapping (SLAM): Part II》两篇文献，重点讨论了概率方法和数据关联。  
- 2. 【2008】 《The slam problem: A survey》，主要讨论了滤波器方法。  
- 3. 【2008】 《Guest editorial special issue on visual slam》，主要讨论了视觉SLAM方法。  
- 4. 【2011】 《A tutorial on graph-based slam》，主要讨论了SLAM后端优化。  
- 5. 【2011】 《A review of recent developments in simultaneous localization and mapping》，主要讨论了观测、一致性和收敛性。  
- 6. 【2012】 《Visual odometry Part I: the first 30 years and fundamentals》和《Visual odometry Part II: Matching, robustness, optimization, and applications》，主要讨论了视觉里程计。  
- 7. 【2016】 《Multiplerobot simultaneous localization and mapping: A review》，主要讨论了多机器人SLAM。  
- 8. 【2016】 《Visual place recognition: A survey》，主要讨论视觉位置识别。  
- **为什么全自动机器人需要SLAM？**SLAM是要构建一个全局一致性的环境表示方法，同时利用自动运动测量和回路闭合。这里的关键词是“回路闭合”：如果我们去掉回路闭合，SLAM就会退化成里程计。但是里程计算法的偏移已经非常小了（小于整个轨迹长度的0.5%），因此这个问题是有意义的。答案分为三个方面：  
- 1. 过去10年中，视觉惯性传感器里程计的算法发展代表了最新进展，视觉惯性导航可以看做是一个退化的SLAM系统，其中回环闭合模块功能关闭。相对于航空领域等领域的惯性导航，SLAM要求研究更具有挑战性的配置下（比如，没有GPS，低性能传感器）的传感器融合。  
- 2. 回环闭合的优势很清楚：通过查找回环闭合，机器人可以理解环境的真正拓扑关系，可以找到位置间的最短路径，因此SLAM可以得到环境的拓扑关系。  
- 3. SLAM是必须的，很多应用都内在或外在地需要一个全局一致性的地图。例如，在许多军事与民生工程应用中机器人的目标是探索环境生成地图，或者检查结构状况（建筑物，桥梁等），在这些例子中需要一个全局一致性3D重构。  
- **SLAM有什么作用？**SLAM是一个比较宽泛的话题，可以从以下几个方面来评估一个SLAM问题的成熟度：  
- 1. 机器人：运动类型（比如，运动状况，最大速度），可用的传感器（如，分辨率，采用率），可用的计算资源；  
- 2. 环境：平面或三维的，自然路标或人工路标，动态元素的数量，对称的数量和感知混淆的风险。这些方面都依赖于传感器与环境的匹配；比如，两个房间对2D激光扫描仪来说看起来可能一样（感知混淆），但相机可以从外观线索上分辨它们；  
- 3. 性能要求：机器人状态估计中的期望精度，环境表示的精度和类型（比如，基于路标的或稠密云点），成功的概率（满足精度边界的测试结果的百分比），估计延时，最大运行时间，最大地图面积。  
- **比较成熟的情况：**  
- 1. 构建一个2D室内环境，机器人配备了编码器和激光扫描仪，有足够的精度（<10厘米）和足够的鲁棒性（比如，低失效率），很大程度上可以解决问题。  
- 2. 或者一个运行缓慢的机器人采用基于视觉的SLAM（比如，火车探路车，室内机器人），视觉惯性里程计被认为是成熟的研究领域。  
- **存在挑战的情况**：  
- 1. 目前当机器人的运动或环境太过挑战时，SLAM算法很容易失效（比如，机器人快速的运动，高动态环境）  
- 2. SLAM算法通常无法满足严苛的性能要求（比如，对快速回环闭合的快速估计）  
- **关于SLAM未来要考虑的问题。**SLAM正在进入第三个时代，鲁棒性觉醒的时代，它具有以下特征：  
- 1. 鲁棒性能：这一时期SLAM系统在任意环境总运行的失效率较低；系统具有失效保护机制且具有自动调整的功能可以根据应用场景自动选择系统参数；  
- 2. 高层次的理解力：SLAM系统已经除了基本的几何重建还能够在更高层次上理解环境信息（比如，语义，可供性，高层几何意义，物理意义）；  
- 3. 资源敏感：SLAM系统可以进行裁剪以满足现有传感器和计算资源，也可以根据现有资源调整计算负载；  
- 4. 对任务驱动的判断：SLAM系统可以自适应地表示地图，其复杂度可以根据机器人执行的任务而改变。  
- **==2 现代SLAM系统解析==**  
- 从概念上现代SLAM系统可以被分为两个部分：前端与后端。**前端**负责将传感器的数据转化为用于状态估计的数据模型。**后端**根据前端生成的数据模型进行推断。  
- **采用最大后验（MAP）估计的SLAM后端**，（公式推导在SLAM#1笔记本）  
- 1. 经过推导，最大后验估计会转化成非线性最小二乘优化问题（这是在假设噪声遵从高斯分布的条件下做出的推导），如果假设噪声遵从拉普拉斯分布就需要将最小二乘的优化目标函数改变为L-1范数。  
- 2. 从优化模型上看，SLAM和BA的目标函数很近似，但是SLAM与BA之间存在两个不同的地方：（1）BA只用投影几何模型，而SLAM则能够处理更多的传感器模型。（2）SLAM的优化函数被设计为**增量式**的。  
- 3. 通常使用高斯-牛顿方法或者Levenberg-Marquardt方法（LM方法）来进行求解。  
- 4. 求解过程中的雅克比矩阵是稀疏的因此可以进行快速求解。  
- 5. 基于最大后验估计的SLAM方法要比传统的基于非线性滤波的方法更为高效和精确。  
- **目前可用的SLAM求解库：**  
- 1. GTSAM, 2012, 《Factor graphs and GTSAM: A hands-on introduction》  
- 2. g2o, 2011, 《g2o: A general framework for graph opti- mization》  
- 3. Ceres, https://code.google.com/p/ceres-solver/  
- 4. iSAM, 2008, 《iSAM: Incremental Smoothing and Mapping》  
- 5. SLAM++, 2013, 《Incremental block cholesky factorization for nonlinear least squares in robotics》  
- **依赖于传感器的SLAM前端**  
- 1. 最大后验估计需要使用经过预处理的传感器数据，因此被称为后端，并依赖于传感器的SLAM前端。  
- 2. 在机器人的实际应用中，可能很难将传感器测量数据转化成分析函数，因此需要进行预处理。例如，原始传感器数据是图像，很难将每个像素的亮度表示为SLAM状态的函数，在一般性的表示中，可能很难给出一个分析方程将观测值与表示方法的参数进行关联。  
- 3. 前端的主要任务是：从传感器数据中提取相关特征。例如，在视觉SLAM中，前端提取环境中少量的特征云点的像素位置；这些云点的像素观测值就很容易在后端部分构建模型。  
- 4. 前端部分还负责将观测值和环境中特定的路标关联（比如，3D云点）：这就是所谓的数据关联。  
- 5. 前端还可以为非线性优化中的变量提供一个初始估计。  
- **==3 完全自动化：鲁棒性==**  
- SLAM系统会因为出现算法失效和硬件相关的失效而变得脆弱。例如，对于极端动态环境的处理，受到现有SLAM算法的局限而很难实现。另外也会由于传感器和机器老化，使系统变得脆弱。  
- 明确地提出**失效模式**对长期运行非常关键，那样就不会对环境结构有要求。例如，要求大部分是静态环境或者完全依赖板载传感器。  
- **SLAM系统失效的来源包括：**  
- 1. 数据关联：是把每次的测量值与对应的状态进行关联。在基于特征的视觉SLAM系统中，它将每个特征和特定的路标关联。可能会出现不同的传感器输入产生相同的传感器信息，导致这个问题非常难解决。如果数据关联构建了错误的测量-状态匹配，后端可能会出现错误估计。  
- 2. 如果环境中存在短期或季节变化，而且没有对动态环境构建模型，可能会产生错误的短期或长期的数据关联。通常SLAM系统要求机器人所处的环境是静态的，这个要求在小场景中单一地图构建中是适用的。
- 3. 如果地图构建长时间运行在大场景中，变化就不可避免。昼夜变化，季节变换，例如树叶或环境结构的改变、旧建筑物变成新建筑物，所有这些都会影响SLAM系统的性能。例如，依赖于视觉特征的系统会在剧烈的昼夜变化中失效，当旧建筑消失环境几何方法也会失效。  
- 4. 在恶劣的环境中使用SLAM，比如水下环境，由于水下属于可视光有限，且一直在变化，而且一般的传感器无法使用（比如镭射测距仪）。  
- **对错误数据的鲁棒性包含以下几个方向：**  
- 1. 传统方法中，前端用于构建正确的数据关联。短期数据关联是最容易处理的：如果传感器的数据采样率比机器人的运动快，对相同特征的跟踪就比较容易。而中长期数据关联需要回环检测来实现鲁棒性。
- 2. 对于回环检测通常使用词袋模型。词袋模型可以量化特征空间以进行更有效的搜索。词袋模型可以设计成层级式字典树，可以在大范围数据集中有效查找。基于词袋模型的技术在处理单任务闭环回路检测中表现出非常可靠的性能。
- 3. 但是词袋方法会由于剧烈的图像变化，而导致视觉单词无法匹配。因此需要开发新的方法，参见《Visual place recognition: A survey, 2016》。  
- 4. 尽管回环检测会使用几何验证（包括RANSAC算法）来确认回环闭合的质量，使得前端的回环检测更具有鲁棒性。但是在直视对齐的情况下，错误的回环闭合会被反馈到后端，并严重损害最大后验估计的质量。  
- **动态环境的挑战主要有两方面：**  
- 1. SLAM系统必须检测，丢掉，跟踪变化。主流的方法都尝试丢掉场景中的动态部分，也有些研究工作将动态元素作为模型的一部分。  
- 2. SLAM系统必须构建一个处理永久或半永久变化的模型，建立更新地图的机制。目前的SLAM系统处理动态环境，要么维护同一位置的多个（与时间相关）地图，要么只有一个表示但可以根据时间变动进行调整。  
- **研究方向：鲁棒性方面待解决的问题**  
- 1. **失效保护SLAM和恢复机制：**现有的SLAM方案在出现离群点时仍然比较脆弱。这主要因为鲁棒的SLAM是基于非凸集迭代优化。这样会有两个结果：（1）离群点去除的结果依赖于优化中初始估计的质量；（2）系统天生脆弱：任一一个离群点都会降低估计的质量，它又会反过来降低系统分辨离群点的能力。因此一个理想的SLAM系统应该是具有失效保护和失效侦测的功能，例如：系统必须能检测到即将发生的失效问题（比如：由于离群点或者硬件老化），还要具有恢复机制重建之前的操作任务，现有SLAM系统没有这种功能。  
- 2. **针对硬件的鲁棒性：**硬件失效并不是SLAM研究的问题，但这些失效会影响SLAM系统。如果传感器精度由于误操作或老化而降低，传感器的测量（噪声和偏移）质量不能匹配后端的噪声模型，将会导致较差的估计。这就会产生不同的研究问题：我们如何检测不良传感器的运行状态？如何相应地调整传感器噪声数据统计模型（协方差，偏移）？  
- 3. **几何度量重定位：**与基于特征方法不同，基于贴图的方法可以在白天和夜晚的图像序列上实现回环闭合，同样也可以对不同的季节实现回环闭合检测。对于几何度量重定位（比如对之前构建的地图估计相对位姿），基于特征的方法可能更规范化，但无法扩展到动态的环境中。（1）对于传感器选择和传感器位置匹配的相关的研究：轨迹匹配中相机的劣势；先用一个相机建图，再在同一个地图中定位另一个相机.（2）另外还要考虑从不对称的拍照角度上得到不同的照片中如何定位，相关的研究包括：在激光地图中的视觉定位问题；如何在Google街景照片的3D纹理地形图上定位无人机；用激光扫描仪实现手绘地图；在2D户型图上用RGB-D定位。
- 4. **时间变化和地图畸变：**主流SLAM方法都假设现实世界是固定不变的，然而真实世界则因为动态环境和物体畸变而并非一成不变。一个理想的SLAM方案应该能够处理环境中的动态因素，包括非固定部分，能够长时间工作生成所有地形地图，并能实时处理这些工作。最近关于非固定运动结构，比如论文《Sequential non-rigid structure from motion using physical priors, 2016》、《Real-time 3d reconstruction of non-rigid shapes with a single moving camera, 2016》、《Visual slam for handheld monocular endoscope, 2014》，限制比较少，但主要应用于小场景。在SLAM领域，《Dynamicfusion: Reconstruction and tracking of nonrigid
scenes in real-time, 2015》针对小场景提出了非刚体实例。然而，大场景非刚体地图仍然需要大量研究。  
- 5. **自动参数调整：**SLAM系统（特别是数据关联模块）需要很多的参数调整。要在给定的场景中正确地工作，特征匹配的阈值，RANSAC参数，还有决定何时添加新的因子到因子图中，或者何时触发回环闭合算法搜索匹配等参数都需要进行配置。如果SLAM需要跳出受限的环境在任意场景中都适用，那么就需要考虑自动参数调整的方法。  
- **==4 完全自动化：尺度==**  
- 在用于环境监控的海洋探索、城市中7*24小时工作的清洁机器人、高精度的农业机器人等室外大场景长时间工作的应用中，随着运行时间的增加，以及机器人不停地探索新的位置，SLAM的因子图可能是没有边界的。然而在实际当中，由于机器人资源限制、计算时间和存储容量有限，因此**设计不受计算时间和存储容量限制**的SLAM方法非常重要。  
- **现有SLAM算法的尺度**  
- 1. 直接线性求解器：由于需要维护雅克比矩阵与噪声矩阵，因此其内存消耗会随着变量数量的增加呈几何式增长。  
- 2. 线性迭代器（例如，共轭梯度法）：内存变量消耗空间呈线性增长。  
- 3. 当在同一个地方多次路过时，节点和边被持续的加入到相同的空间中时，因子图的优化就变得没有效率，还不如采用稀疏图结构。  
- **减少因子图优化复杂性的研究现状**主要集中在两个方面：（1）稀疏方法，通过损失一些信息来降低内存使用和提高计算效率；（2）并行和多机器人方法，将计算任务分配到多个机器人或处理器上。  
- 1. **节点与边的稀疏化：**这类方法通过减少将要添加到图中的节点数量，或者筛选掉具有较少信息的节点和因子，降低问题的规模。  
> 《Information- based compact pose slam, 2010》，采用信息论的方法添加非冗余节点和高信息含量观测值到图中。  
> 《Temporally scalable visual slam using a reduced pose graph, 2013》，通过为现有节点添加新的约束，来尽可能的避免添加新的节点，这样变量的增长就只和空间大小有关，而与时间无关。  
> 《Efficient information-theoretic graph pruning for graph-based slam with laser range finders, 2011》，采用基于信息的标准来对决定位姿图优化中哪些节点应该被筛掉。  
> 《Generic factor- based node marginalization and edge sparsification for pose-graph slam, 2013》和《Nonlinear factor recovery for long-term slam, 2016》，分别介绍了GLC（Generic Linear Constraint）因子和NGS（NonLinear Graph Sparsification），采用一个筛选节点的马尔科夫链来处理，并计算其近似稀疏。  
> 《Consistent
sparsification for graph optimization, 2013》，通过求解L1范式的最小化问题来对Hessian矩阵进行稀疏化。  
- 2. **并行SLAM：**SLAM并行算法将因子图的计算放入多个处理核心中进行计算。主要的方法是将因子图分解为几个不同的子图，局部优化每一个子图和一个全局优化，对应的算法通常称为局部构图算法。  
> 《Tectonic SAM: Exact; out-of-core; submap-based SLAM, 2007》，展示了一种精确的局部建图方法，以及通过缓存分解的子图来提高运算速度。  
> 《Multi-level submap based slam using nested dissection, 2010》，将局部图组织为二叉树结构，并使用嵌套分解来降低两个子树之间的依赖程度。  
> 《Linear SLAM: A linear solution to the feature-based and pose graph SLAM based on submap joining, 2013》，提出了一种针对大场景SLAM的近似解决方案，使用最小二乘法来求解一系列的子图，并采用分治的策略来合并子图。  
> 《A multilevel relaxation algorithm for simultaneous localisation and mapping, 2005》，提出了一种多层的松弛法，松弛法通过迭代方法来利用两个低精度数值来计算出一个高精度的结果。  
> 《Hierarchical optimization on manifolds for online 2D and 3D mapping, 2010》，提出了一种层级式的局部图：当得到一个新的观测值时，位于高层的局部图会被立刻修改，但是只有受影响的低层级区域才会更改。  
> 《An Approach to Solving Large-Scale SLAM Problems with a Small Memory Footprint, 2014》，提出了一种基于层次分解的近似SLAM方法。  
> 《Exactly sparse memory efficient slam using the multi-block alternating direction method of multipliers, 2015》，通过交替方向乘子法ADMM来进行并行计算。ADMM算法是机器学习中比较广泛使用的约束问题最优化方法，它是ALM算法的一种延伸，只不过将无约束优化的部分用块坐标下降法（block coordinate descent，或叫做alternating minimization）来分别优化。其中的原理可以参考文献 “Distributed Optimization and Statistical Learning via the Alternating Direction Method of Multipliers”。产生这种方法主要是为了弥补二次惩罚的缺点。在一些问题当中，用二次惩罚来近似约束问题在最优点附近需要惩罚项的系数趋近于无穷，而这种要求会使得海森矩阵很大，因此近似的目标函数很不稳定。为了解决这个问题，引入了线性逼近的部分，通过线性项系数不断的接近最优解（对偶上升），使得在二次惩罚项的系数很小的情况下，也能得到满足要求精度的解。ADMM目前是比较成熟，比较受欢迎的约束问题最优化通用框架。  
> 《Parallel tracking and mapping for small ar workspaces, 2007》，近似的解耦定位与地图，将其放到两个线程中运行。  
> 《Adaptive relative bundle adjustment, 2009》，通过优化局部邻域的参数化来降低计算量。  
> 《Double window optimisation for constant time visual SLAM, 2011》，采用两个步骤，首先优化一个局部的位姿-特征图，然后采用上面的方法完成位姿-位姿图的变换。  
> 《Concurrent filtering and smoothing: A parallel architecture for real-time navi- gation and full smoothing, 2014》，将因子图优化分解为一个快速滤波线程和一个慢速平滑线程，两个线程之间周期性的进行同步。  
- 3. **分布式多机器人SLAM：**一种处理大型场景的方法就是部署多个机器人执行SLAM，将场景分为多个小的区域分别由不同的机器人来完成。这种方法有两个变体：（1）中心化和（2）去中心化。
> 中心化的方案指机器人将自己的本地信息传送到中央节点以执行推断计算，下面的文献介绍了中心化方案：  
> 《C-SAM : Multi-robot SLAM using square root information smoothing，2008》  
>《Decentralised cooperative localisation for heterogeneous teams of mobile robots, 2011》  
> 《Distributed real-time cooperative localization and mapping using an uncertainty-aware expectation maximization approach, 2015》  
> 《Collaborative monocular SLAM with multiple micro aerial vehicles, 2013》  
> 《Multiple relative pose graphs for robust cooperative mapping, 2010》  
> 《Multi-robot SLAM using condensed measurements, 2011》  
> 《Real-time 6-DOF multi-session visual SLAM over large scale environments, 2013》  
> 《C2TAM: A cloud framework for cooperative tracking and mapping, 2014》  
> 去中心化的方案没有中心数据融合，机器人利用局部通信在共同估计上保持一致性，下面的文献讨论了去中心化的方案：  
> 《Distributed maximum a posteriori estimation for multirobot cooperative localization, 2009》，提出了一种基于分布式共轭梯度方法的协作式定位算法。  
> 《Multi-agent localization from noisy relative pose measurements, 2011》和《Distributed centroid estimation from noisy relative mea- surements, 2012》，利用分布式雅克比方法来估计一组二维位姿。  
> 《Distributed consensus on robot networks for dynamically merging feature-based maps, 2012》，基于一致性信息方法进行地图合并。  
> 《Collaborative localization with heterogeneous inter-robot measurements by Riemannian optimization, 2013》，采用分布式梯度下降方法来估计3D位姿。  
> 《DDF-SAM: Fully distributed slam using constrained factor graphs, 2010》和《DDF-SAM 2.0: Consistent distributed smoothing and mapping, 2013》，利用高斯消元法开发了一种称为DDF-SAM的方法，每个机器人通过隔离器（不同机器人之间的共享变量）来交换高斯边缘。  
> 《Multiple-robot simultaneous localization and mapping: A review, 2016》，最近的多机器人SLAM的综述。  
- 4. **高斯消元法：**作为被广泛使用的方法存在两个缺点：（1）机器人之间交换的边缘是稠密的，通信的代价与隔离器的数量平方成正比。（2）高斯消元法是分布式多机器人问题的一个线性化解决方案，因此这类的方法（例如DDF-SAM）需要好的线性点和复杂的书签来保证机器人之间线性点的一致性。  
> 《Communication-constrained multi-AUV cooperative SLAM, 2015》，介绍了利用稀疏化技术来减少通信开销。  
> 《Distributed trajectory estimation with privacy and communication constraints: a two-stage distributed gauss-seidel approach, 2015》，提出一种替代高斯消元法的Gaussian-Seidel方法，该方法的通信负担与隔离器数量呈线性相关。  
- **待解决的问题**尽管有大量减少因子图优化复杂度的工作，但是与长期运行的目标之间存在很大的距离：  
- 1. **地图维护：**如何存储地图是一个在长期执行的SLAM中极少被探索的领域。但是即使是在将地图存储于云这种内存没有受限的情况下，原生的点云地图或立体地图会浪费大量的内存。在基于视觉的SLAM方案中所存储的特征描述子，也会快速的变得过于臃肿而难以处理。  
> 《Get out of my lab: Large-scale, real-time visual-inertial localization, 2015》，提出了压缩已知地图的方法。  
> 《Chisel: Real time large scale 3d reconstruction onboard a mobile device using spatially hashed signed distance fields》，提出了内存高效的稠密重建方法。  
- 2. **鲁棒的分布式建图：**在单一机器人的情况下，已经提出了很多离群点剔除方法。但是在多机器人领域则完全忽略了离群点剔除的问题。处理错误的测量值是个巨大的挑战，主要因为下述的两个原因：（1）机器人之间没有可能无法共享共同的参考帧，这就使得很难检测并去除错误的回环闭合；（2）机器人只能通过极少的局部信息来检测离群点，这个领域尚未被探索。  
> 《Incremental distributed inference from arbitrary poses and unknown data association: Using collaborating robots to establish a common reference》，是第一篇探讨第一个原因的文献。  
- 3. **地图信息的维护与更新：**在长期建图的过程中，存在以下的问题：（1）地图包含的信息更新的频率如何选择？（2）如何判断信息何时过期，然后丢弃？（3）哪些信息可以被丢弃，哪些必须被保留？这些问题很明显都是和任务相关的，目前尚未有文献给出一个绝对的答案。  
- 4. **资源受限平台：**另外一个挑战是如何使现有的SLAM算法适应那些计算资源受限的机器人平台。当机器人的尺寸变小的时候，这个问题就极为重要。很多SLAM算法由于运算开销太大而无法运行于手机、微型无人机、机器昆虫这类平台。因此需要一种能够稍微降低精度以降低运算开销的算法。在多机器人场景中，在带宽受限甚至通讯失败的情况下，保证机器人团队可靠的运行。  
> 《Map api - scalable decentralized map building for robots, 2015》，是第一篇在这个方向研究的文献。
- **==5 完全自动化：尺度==**  



> 《》
> 《》
> 《》
> 《》
> 《》
> 《》



















